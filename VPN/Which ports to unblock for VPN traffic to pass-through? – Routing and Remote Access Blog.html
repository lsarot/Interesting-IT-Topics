<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="pingback" href="https://blogs.technet.microsoft.com/rrasblog/xmlrpc.php">
		<!--[if lt IE 9]>
	<script src="https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/js/html5.js"></script>
	<![endif]-->
	<title>Which ports to unblock for VPN traffic to pass-through? &#8211; Routing and Remote Access Blog</title>
<link rel='dns-prefetch' href='//ajax.aspnetcdn.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Routing and Remote Access Blog &raquo; Which ports to unblock for VPN traffic to pass-through? Comments Feed" href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/blogs.technet.microsoft.com\/rrasblog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='wds-ratings-css'  href='https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/wds-ratings/wds-ratings.css?ver=20161014' type='text/css' media='all' />
<link rel='stylesheet' id='microsoft-parent-style-css'  href='https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/style.css?ver=02092017' type='text/css' media='all' />
<link rel='stylesheet' id='microsoft-child-style-css'  href='https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft-technet/style.css?ver=04152016' type='text/css' media='all' />
<script type='text/javascript' src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.1.min.js'></script>
<script type='text/javascript' src='https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/bootstrap.min.js'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/js/single.js?ver=02092017'></script>
<link rel='https://api.w.org/' href='https://blogs.technet.microsoft.com/rrasblog/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://blogs.technet.microsoft.com/rrasblog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://blogs.technet.microsoft.com/rrasblog/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/" />
<link rel='shortlink' href='https://blogs.technet.microsoft.com/rrasblog/?p=14' />
<link rel="alternate" type="application/json+oembed" href="https://blogs.technet.microsoft.com/rrasblog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.technet.microsoft.com%2Frrasblog%2F2006%2F06%2F14%2Fwhich-ports-to-unblock-for-vpn-traffic-to-pass-through%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://blogs.technet.microsoft.com/rrasblog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.technet.microsoft.com%2Frrasblog%2F2006%2F06%2F14%2Fwhich-ports-to-unblock-for-vpn-traffic-to-pass-through%2F&#038;format=xml" />
	<script>
		if(window.document.referrer.indexOf('login.live.com') !== -1) {
			// redefine ga function to prevent referrer data collected by google analytics
			window.ga = function(){};
		}
	</script>
	<div id='msccBanner' dir='ltr' data-site-name='uhf-TechNetBlogs' data-mscc-version='0.4.0' data-nver='aspnet-2.0.7' data-sver='0.1.2' class='cc-banner' role='alert'><div class='cc-container'><svg class='cc-icon cc-v-center' x='0px' y='0px' viewBox='0 0 44 44' height='30px' fill='none' stroke='currentColor'><circle cx='22' cy='22' r='20' stroke-width='2'></circle><line x1='22' x2='22' y1='18' y2='33' stroke-width='3'></line><line x1='22' x2='22' y1='12' y2='15' stroke-width='3'></line></svg> <span class='cc-v-center cc-text'>This site uses cookies for analytics, personalized content and ads. By continuing to browse this site, you agree to this use.</span> <a href='https://go.microsoft.com/fwlink/?linkid=845480' aria-label='Learn more about Microsoft&#39;s Cookie Policy' id='msccLearnMore' class='cc-link cc-v-center cc-float-right' data-mscc-ic='false'>Learn more</a></div></div><script type="text/javascript">
jQuery( window ).load( function() {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    if (typeof mscc === 'undefined' || (!mscc || mscc.hasConsent())) {
                ga('require', 'linkid');
                ga('create', 'UA-65691138-1', 'auto');
                ga('send', 'pageview');
            }
} );
</script>
			<!-- Begin Custom CSS --><style type="text/css" id="wds-custom-css">
						</style><!-- End Custom CSS -->
			    <link rel="shortcut icon" href="https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft-technet/images/favicon-technet.png">
<meta property="og:type" content="article" />
<meta property="og:title" content="Which ports to unblock for VPN traffic to pass-through?" />
<meta property="og:url" content="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/" />
<meta property="og:site_name" content="Routing and Remote Access Blog" />
<meta property="og:description" content="Little Background: Microsoft RRAS server and VPN client supports PPTP, L2TP/IPSec, SSTP and IKEv2&nbsp; based VPN connection. PPTP control path is over TCP and data path over GRE. L2TP tunnel traffic is carried over IPSec transport mode and&nbsp;IPSec protocol internally has a control path through IKE and data path over ESP.&nbsp;SSTP control and data path..." />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Which ports to unblock for VPN traffic to pass-through?" />
<meta name="twitter:url" content="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/" />
<meta name="twitter:description" content="Little Background: Microsoft RRAS server and VPN client supports PPTP, L2TP/IPSec, SSTP and IKEv2&nbsp; based VPN connection. PPTP control path is over TCP and data path over GRE. L2TP tunnel traffic is carried over IPSec transport mode and&nbsp;IPSec protocol internally has a control path through IKE and data path over ESP.&nbsp;SSTP control and data path..." />
</head>

<body class="post-template-default single single-post postid-14 single-format-standard">
<div id="page" class="site container-fluid">

	<header id="site-header" class="site-header row" role="banner">
		<div id="site-header-global-wrapper" class="site-header-global-wrapper">
			<div id="site-header-global" class="site-header-global">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#site-profile-menu" aria-label="toggle menu" tabindex="0" aria-expanded="false">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div id="site-logo" class="col-sm-5 row navbar-header">
					<div id="header-microsoft-logo">
						<a id="home-link" href="https://www.microsoft.com/" tabindex="1" aria-label="Microsoft logo">
							<img id="header-microsoft-logo-svg" src="https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/images/ms-logo-gray.svg" alt="Microsoft logo">
							<span id="brand">
								<span id="brand-separator">|</span>
								<span id="brand-name"></span>
							</span>
						</a>
					</div>
				</div>
				<div id="site-header-global-right" class="col-sm-7">
					<div id="site-profile-menu" class="navbar-collapse collapse">
						<div id="search-form-wrapper">
														<form id="search-form" role="search" action="https://social.msdn.microsoft.com/search/en-US" home-url="https://blogs.technet.microsoft.com/rrasblog" autocomplete="off">
								<div class="input-group">
																			<input name="rq" value="site:blogs.technet.microsoft.com/rrasblog" type="hidden">
										<input name="rn" value="rrasblog" type="hidden">
																		<input type="hidden" name="ral" value="1">
									<input type="text" class="form-control" placeholder="Search" name="query" id="srch-term" tabindex="0" aria-label="Search box with search options">
									<div class="input-group-btn">
										<button aria-label="Search" class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
									</div>
								</div>
							</form>
							<div id="search-option">
								<div class="search-filter" id="search-filter-site" tabindex="0" aria-label="Search MSDN">
									<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
									<span class="search-text">Search MSDN</span>
								</div>
								<div class="search-filter" tabindex="0" aria-label="Search all blogs" id="search-filter-all-blogs">
									<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
									<span class="search-text">Search all blogs</span>
								</div>
																	<div class="search-filter selected" tabindex="0" aria-label="Search this blog" id="search-filter-this-blog">
										<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
										<span class="search-text">Search this blog</span>
									</div>
															</div>
						</div>
						<div id="me-control">
															<a href="https://blogs.technet.microsoft.com/wp-login.php?aadsso_action=login">Sign in</a>
													</div>
					</div>
				</div>

			</div>

		</div>
		<div id="site-header-blog-wrapper" class="site-header-blog-wrapper ms-blog-header clear-both">
			<div id="site-header-blog" class="site-header-blog">
				<nav class="navbar navbar-inverse">
					<div id="blog-logo-area" class="navbar-header">
						<div id="blog-logo" data-toggle="collapse" data-target="#blog-menu" tabindex="0" aria-label="blog logo">
														<div id="blog-logo-text">
				<h1 class="site-title ms-blog-title">
					<a href="https://blogs.technet.microsoft.com/rrasblog" class="for-desktop">
						Routing and Remote Access Blog					</a>
					<a href="https://blogs.technet.microsoft.com/rrasblog" class="for-mobile">
						Routing and Remote Access Blog					</a>
				</h1>
				<p class="site-description ms-blog-description">VPN articles &#8211; straight from Windows development team</p>
			</div>
									</div>
					</div>
									</nav>
			</div>
		</div>
		<div id="site-header-image-wrapper" class="ms-blog-banner">
			<div id="site-header-image">
											</div>
		</div>
	</header>

	<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-14" class="post-14 post type-post status-publish format-standard hentry category-uncategorized tag-design tag-troubleshooting">

	<header class="entry-header single">
		<h1 class="entry-title">Which ports to unblock for VPN traffic to pass-through?</h1>		<div class="rating-wrap">
		<div id="star-rating-14" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="14" data-container="body" data-toggle="tooltip" title="1 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt='avatar of rrasblog' src='https://secure.gravatar.com/avatar/64f6a10b70d5a06695b38f9ea0374ed5?s=22&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/64f6a10b70d5a06695b38f9ea0374ed5?s=44&amp;d=mm&amp;r=g 2x' class='avatar avatar-22 photo' height='22' width='22' /><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="" href="https://blogs.technet.microsoft.com/rrasblog/author/rrasblog/">rrasblog</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2006-06-14T05:59:00+00:00">June 14, 2006</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comments">8</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social='{"type":"twitter", "url":"https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/", "text": "Which ports to unblock for VPN traffic to pass-through?"}' href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social='{"type":"linkedin", "url":"https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/", "text": "Which ports to unblock for VPN traffic to pass-through?"}' href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p><font size="1" face="Verdana">Little Background: </font><font size="1" face="Verdana">Microsoft RRAS server and VPN client supports PPTP, L2TP/IPSec, SSTP and IKEv2&nbsp; based VPN connection. PPTP control path is over TCP and data path over GRE. </font><font size="1" face="Verdana">L2TP tunnel traffic is carried over IPSec transport mode and&nbsp;IPSec protocol internally has a control path through IKE and data path over ESP.&nbsp;SSTP control and data path is over TCP. IKEv2 control path is over IKE and data path over ESP.</font>
<p><font size="1" face="Verdana">So now coming back to original question. There are multiple scenarios:</font></p>
<p><font size="1" face="Verdana">1) If <u>RRAS based&nbsp;VPN&nbsp;server is behind a firewall</u> (i.e. a firewall is placed between Internet and RRAS server), then following ports need to be&nbsp;opened (bidirectional)&nbsp;on this firewall to allow VPN traffic to pass through: -</font></p>
<ul>
<li><font size="1" face="Verdana">For PPTP: </font>
<ul>
<li><font size="1" face="Verdana">IP Protocol=TCP, TCP Port number=1723&nbsp;&nbsp; &lt;- Used by PPTP control path</font>
</li>
<li><font size="1" face="Verdana">IP&nbsp;Protocol=GRE (value 47)&nbsp;&nbsp; &lt;- Used by PPTP data path</font></li>
</ul>
</li>
<li><font size="1" face="Verdana">For L2TP:</font>
<ul>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=500&nbsp;&nbsp;&nbsp; &lt;- Used by IKEv1 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=4500&nbsp;&nbsp; &lt;- Used by IKEv1 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP&nbsp;Protocol Type=ESP (value 50)&nbsp;&nbsp; &lt;- Used by IPSec data path</font></li>
</ul>
</li>
<li><font size="1" face="Verdana">For SSTP:</font></li>
<ul>
<li><font size="1" face="Verdana">IP Protocol=TCP, TCP Port number=443&nbsp;&nbsp; &lt;- Used by SSTP control and data path</font> </li>
</ul>
<li><font size="1" face="Verdana">For IKEv2:</font>
<ul>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=500&nbsp;&nbsp;&nbsp; &lt;- Used by IKEv2 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=4500&nbsp;&nbsp; &lt;- Used by IKEv2 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP&nbsp;Protocol Type=ESP (value 50)&nbsp;&nbsp; &lt;- Used by IPSec data path</font></li>
</ul>
</li>
</ul>
<p><font size="1" face="Verdana">2) <u>If RRAS server is directly connected to Internet</u>, then&nbsp;you need to protect&nbsp;RRAS server from the&nbsp;Internet side&nbsp;(i.e. only allow access to the services on the public interface&nbsp;that isaccessible from the Internet side). This can be done using RRAS static filters&nbsp;or running Windows Firewall on the public interface (or the interface towards the Internet side). In this scenario following ports need to be opened (bidirectional) on RRAS box to allow VPN traffic to pass through</font></p>
<ul>
<li><font size="1" face="Verdana">For PPTP: </font>
<ul>
<li><font size="1" face="Verdana">IP Protocol=TCP, TCP Port number=1723&nbsp; &lt;- Used by PPTP control path</font>
</li>
<li><font size="1" face="Verdana">IP&nbsp;Protocol=GRE (value 47)&nbsp; &lt;- Used by PPTP data path</font></li>
</ul>
</li>
<li><font size="1" face="Verdana">For L2TP:</font> </li>
<ul>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=500&nbsp;&nbsp; &lt;- Used by IKEv1 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=4500 &lt;- Used by IKEv1 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP&nbsp;Protocol Type=UDP, UDP Port Number=1701&nbsp; &lt;- Used by L2TP control/data path</font>
</li>
<li><font size="1" face="Verdana">IP Protocol Type=50&nbsp; &lt;- Used by data path (ESP)</font></li>
</ul>
<p><font size="1" face="Verdana"></p>
<li><font size="1" face="Verdana">For SSTP:</font></li>
<ul>
<li><font size="1" face="Verdana">IP Protocol=TCP, TCP Port number=443&nbsp;&nbsp; &lt;- Used by SSTP control and data path</font> </li>
</ul>
<li><font size="1" face="Verdana">For IKEv2:</font> </li>
<ul>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=500&nbsp;&nbsp; &lt;- Used by IKEv2 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP Protocol Type=UDP, UDP Port Number=4500 &lt;- Used by IKEv2 (IPSec control path)</font>
</li>
<li><font size="1" face="Verdana">IP&nbsp;Protocol Type=UDP, UDP Port Number=1701&nbsp; &lt;- Used by L2TP control/data path</font>
</li>
<li><font size="1" face="Verdana">IP Protocol Type=50 &lt;- Used by data path (ESP)</font></li>
</ul>
<p></font></ul>
<p><font size="1" face="Verdana"><strong>Note</strong>: Please DO NOT configure RRAS static filters if you are running on the same server RRAS based NAT router functionality. This is because&nbsp;RRAS static filters are stateless and NAT translation requires a stateful edge firewall like ISA firewall.</font></p>
<p><font size="1" face="Verdana"><strong>Do not forget</strong>: If you enable Windows firewall or RRAS static filters on the public interface and only enable VPN traffic to pass-through, then all the other traffic may be dropped. For example, if the same server is running as a mail server facing internet or a DNS server or a reverse web proxy server, then you need to enable the ports used by those services explicitly. For further details, refer to this article: <a href="http://blogs.technet.com/rrasblog/archive/2006/07/06/enabling-rras-drops-all-other-traffic-except-vpn-traffic.aspx">http://blogs.technet.com/rrasblog/archive/2006/07/06/enabling-rras-drops-all-other-traffic-except-vpn-traffic.aspx</a></font></p>
<p><font size="1" face="Verdana">References:</font></p>
<p><a href="http://technet2.microsoft.com/WindowsServer/en/Library/ac14405b-3802-4ae0-bcd5-5c33bb7db5311033.mspx?mfr=true" mce_href="http://technet2.microsoft.com/WindowsServer/en/Library/ac14405b-3802-4ae0-bcd5-5c33bb7db5311033.mspx?mfr=true"><font size="1" face="Verdana">http://technet2.microsoft.com/WindowsServer/en/Library/ac14405b-3802-4ae0-bcd5-5c33bb7db5311033.mspx?mfr=true</font></a></p>
<p><a id="ctl00___ctl00___ctl02___Results___postlist___EntryItems_ctl06_PostTitle" href="http://blogs.technet.com/rrasblog/archive/2007/06/13/ports-affecting-the-vpn-connectivity.aspx">Ports affecting the VPN connectivity</a></p>
<p><a id="ctl00___ctl00___ctl02___Results___postlist___EntryItems_ctl13_PostTitle" href="http://blogs.technet.com/rrasblog/archive/2007/03/30/rras-server-in-lhs-which-one-to-use-windows-firewall-or-rras-filters.aspx">RRAS Server in Windows server 2008: Which one to use - Windows firewall or RRAS filters</a>&nbsp;&nbsp;</p>
<p style="MARGIN: 0in 0in 0pt" class="MsoNormal"><span style="COLOR: black"><font color="#000000" size="1" face="Verdana">Samir Jain<br>Lead Program Manager<br>RRAS, Windows Enterprise Networking</font></span></p>
<p style="MARGIN: 0in 0in 0pt" class="MsoNormal"><span style="COLOR: black"><font size="1" face="Verdana"></font></span>&nbsp;</p>
<p><span style="COLOR: black"></p>
<p style="MARGIN: 0in 0in 0pt" class="MsoNormal"><font size="1" face="Verdana">[This posting is provided "AS IS" with no warranties, and confers no rights.]</font></p>
<p></span><br />
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1700161-11");
pageTracker._trackPageview();
} catch(err) {}</script></p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
					<div class="tags">
				<span>Tags </span>
				<span>
					<a href="https://blogs.technet.microsoft.com/rrasblog/tag/design/" rel="tag">Design</a> <a href="https://blogs.technet.microsoft.com/rrasblog/tag/troubleshooting/" rel="tag">Troubleshooting</a>				</span>
			</div>
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (8)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="https://blogs.technet.microsoft.com/rrasblog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="4" aria-required="true"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit btn btn-default" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='14' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="ca034731dc" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="36"/></p>			</form>
			</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-115">
				<div id="div-comment-115" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-115">
			February 5, 2018 at 5:04 pm</a>		</div>

		<p>Hi Folks,<br />
<br />I have seen a lot of IP addressing,&amp;amp;nbsp;NIC, NAT&amp;amp;nbsp;related queries&amp;amp;nbsp;in different newsgroups&#8230;.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=115#respond' onclick='return addComment.moveForm( "div-comment-115", "115", "respond", "14" )' aria-label='Reply to '>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-130">
				<div id="div-comment-130" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-130">
			February 5, 2018 at 5:04 pm</a>		</div>

		<p>I have seen this a common customer query: My 2K, 2K3 server was working as DNS, DHCP, AD etc and stopped&#8230;</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=130#respond' onclick='return addComment.moveForm( "div-comment-130", "130", "respond", "14" )' aria-label='Reply to '>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-162">
				<div id="div-comment-162" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-162">
			February 5, 2018 at 5:04 pm</a>		</div>

		<p>Hello Customers, In this post, I will highlight on various placement requirements related to RAS server.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=162#respond' onclick='return addComment.moveForm( "div-comment-162", "162", "respond", "14" )' aria-label='Reply to '>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-195">
				<div id="div-comment-195" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-195">
			February 5, 2018 at 5:04 pm</a>		</div>

		<p>Hello, As you know in Windows server 2008 (WS08) we have removed “Basic Firewall” functionality in RRAS</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=195#respond' onclick='return addComment.moveForm( "div-comment-195", "195", "respond", "14" )' aria-label='Reply to '>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-331">
				<div id="div-comment-331" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-331">
			May 15, 2014 at 4:24 am</a>		</div>

		<p>Pingback from Using Azure Script to Configure Windows server 2012 as RRAS for Azure Site To Site VPN | PowerShellRay</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=331#respond' onclick='return addComment.moveForm( "div-comment-331", "331", "respond", "14" )' aria-label='Reply to Anonymous'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-321">
				<div id="div-comment-321" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-321">
			June 23, 2014 at 4:28 pm</a>		</div>

		<p>Pingback from asus vpn</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=321#respond' onclick='return addComment.moveForm( "div-comment-321", "321", "respond", "14" )' aria-label='Reply to Anonymous'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-311">
				<div id="div-comment-311" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-311">
			October 2, 2014 at 3:00 am</a>		</div>

		<p>Ah, what a beautiful site this is! With RRAS on Server 2012 R2 and Azure – it’s never been easier to</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=311#respond' onclick='return addComment.moveForm( "div-comment-311", "311", "respond", "14" )' aria-label='Reply to Anonymous'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-341">
				<div id="div-comment-341" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&amp;d=mm&amp;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/#comment-341">
			October 28, 2014 at 7:19 am</a>		</div>

		<p>OK. You have a home lab and you are eager to have a play and create a S2S VPN into Azure with RRAS and</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/?replytocom=341#respond' onclick='return addComment.moveForm( "div-comment-341", "341", "respond", "14" )' aria-label='Reply to Anonymous'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
	
</div><!-- .comments-area -->
	</div><!-- #primary -->
	<a class="screen-reader-shortcut" href="#primary" tabindex="1">Skip to main content</a>

<div id="secondary" class="sidebar col-sm-3">
	<div id="sidebar-widget-area" class="sidebar-widget-area" role="complementary">
		<aside id="sfmsb_settings-2" class="widget sfmsb_widget"><div class="sfmsb-follow-social-buttons sfmsb-under sfmsb-circle 40 sfmsb-horizontal"><h2 class="widget-title">Follow Us</h2><a title="RSS Feed" aria-label="RSS Feed" target="_blank" href="https://blogs.technet.microsoft.com/rrasblog/feed/"><span class="sfmsb-icon-feed sfmsb-circle" style="color:#ffa500;font-size:40px;" data-color="#ffa500"></span></a><div class="sfmsb-clearfix"></div></div></aside><aside id="tag_cloud-2" class="widget widget_tag_cloud"><h2 class="widget-title">Popular Tags</h2><div class="tagcloud"><a href="https://blogs.technet.microsoft.com/rrasblog/tag/design/" class="tag-cloud-link tag-link-4 tag-link-position-1" style="font-size: 14px;">Design</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/sstp/" class="tag-cloud-link tag-link-7 tag-link-position-2" style="font-size: 14px;">SSTP</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/how-to/" class="tag-cloud-link tag-link-3 tag-link-position-3" style="font-size: 14px;">How-To</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/troubleshooting/" class="tag-cloud-link tag-link-2 tag-link-position-4" style="font-size: 14px;">Troubleshooting</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/ikev2/" class="tag-cloud-link tag-link-10 tag-link-position-5" style="font-size: 14px;">IKEv2</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/ipv6/" class="tag-cloud-link tag-link-6 tag-link-position-6" style="font-size: 14px;">IPv6</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/l2tp/" class="tag-cloud-link tag-link-8 tag-link-position-7" style="font-size: 14px;">L2TP</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/pptp/" class="tag-cloud-link tag-link-11 tag-link-position-8" style="font-size: 14px;">PPTP</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/admin-dll/" class="tag-cloud-link tag-link-9 tag-link-position-9" style="font-size: 14px;">Admin dll</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/load-balancing/" class="tag-cloud-link tag-link-5 tag-link-position-10" style="font-size: 14px;">Load Balancing</a>
<a href="https://blogs.technet.microsoft.com/rrasblog/tag/3rd-party/" class="tag-cloud-link tag-link-12 tag-link-position-11" style="font-size: 14px;">3rd Party</a></div>
</aside><aside id="msdn-archive-widget-2" class="widget msdn-archive-widget"><h2 class="widget-title">Archives</h2>	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2009/08/'>August 2009</a>&nbsp;(2)</li>
	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2009/07/'>July 2009</a>&nbsp;(2)</li>
	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2009/'>All of 2009</a>&nbsp;(30)</li>
	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2008/'>All of 2008</a>&nbsp;(11)</li>
	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2007/'>All of 2007</a>&nbsp;(40)</li>
	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2006/'>All of 2006</a>&nbsp;(30)</li>
	<li><a href='https://blogs.technet.microsoft.com/rrasblog/2005/'>All of 2005</a>&nbsp;(6)</li>
</aside>	</div>
</div><!-- #secondary -->
</div><!-- .site-content -->

<footer id="site-footer" class="site-footer row" role="contentinfo">
	<div id="site-info" class="site-info">
		<div id="footer-text" class="col-sm-4 col-sm-offset-6">
			<span>
				<a href="https://msdn.microsoft.com/dn529288" data-mscc-ic="false">Privacy & Cookies</a>
			</span>
			<span>
				<a href="https://msdn.microsoft.com/cc300389" data-mscc-ic="false">Terms of Use</a>
			</span>
			<span>
				<a href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx" data-mscc-ic="false">Trademarks</a>
			</span>
		</div>
		<div id="footer-far" class="col-sm-2">
			<div id="footer-microsoft-logo">
				<a href="https://www.microsoft.com" aria-label="Microsoft Logo">
					<svg id="footer-microsoft-logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 347 70.5" enable-background="new 0 0 347 70.5"><g fill="#fff"><path d="M39.5 44.6l-2.8 7.9h-.2c-.5-1.8-1.3-4.5-2.7-7.8l-15-37.7h-14.7v60h9.7v-37c0-2.3 0-5-.1-8.2-.1-1.6-.2-2.9-.3-3.8h.2c.5 2.3 1 4 1.4 5.1l18 43.8h6.8l17.9-44.2c.4-1 .8-3 1.2-4.7h.2c-.2 4.4-.4 8.4-.5 10.8v38.1h10.4v-60h-14.1l-15.4 37.7zM78.8 23.9h10.1v43h-10.1zM83.9 5.7c-1.7 0-3.1.6-4.3 1.7-1.2 1.1-1.8 2.5-1.8 4.2 0 1.6.6 3 1.8 4.1 1.2 1.1 2.6 1.6 4.3 1.6 1.7 0 3.2-.6 4.3-1.6 1.2-1.1 1.8-2.5 1.8-4.1 0-1.6-.6-3-1.8-4.2-1-1.2-2.5-1.7-4.3-1.7M124.7 23.5c-1.9-.4-3.8-.6-5.7-.6-4.6 0-8.8 1-12.3 3s-6.3 4.8-8.1 8.3c-1.9 3.6-2.8 7.7-2.8 12.4 0 4.1.9 7.8 2.7 11.1 1.8 3.3 4.3 5.9 7.6 7.7 3.2 1.8 6.9 2.7 11.1 2.7 4.8 0 8.9-1 12.2-2.9l.1-.1v-9.3l-.4.3c-1.5 1.1-3.2 2-4.9 2.6-1.8.6-3.4.9-4.8.9-4 0-7.2-1.2-9.5-3.7s-3.5-5.9-3.5-10.2c0-4.4 1.2-7.9 3.6-10.5 2.4-2.6 5.6-3.9 9.5-3.9 3.3 0 6.6 1.1 9.6 3.3l.4.3v-9.8l-.1-.1c-1.2-.6-2.8-1.1-4.7-1.5M158 23.2c-2.5 0-4.8.8-6.8 2.4-1.7 1.4-2.9 3.4-3.9 5.8h-.1v-7.4h-10.1v43h10.1v-22c0-3.7.8-6.8 2.5-9.1s3.9-3.5 6.5-3.5c.9 0 1.9.2 3 .4 1.1.3 1.9.6 2.4 1l.4.3v-10.2l-.2-.1c-.8-.4-2.1-.6-3.8-.6M185.5 22.9c-7.1 0-12.7 2.1-16.7 6.2s-6 9.8-6 16.9c0 6.7 2 12.1 5.9 16.1 3.9 3.9 9.2 5.9 15.8 5.9 6.9 0 12.4-2.1 16.4-6.3 4-4.2 6-9.8 6-16.7 0-6.8-1.9-12.3-5.7-16.2-3.7-3.9-9-5.9-15.7-5.9m8 33.1c-1.9 2.4-4.8 3.6-8.5 3.6s-6.6-1.2-8.7-3.7c-2.1-2.4-3.1-5.9-3.1-10.3 0-4.6 1.1-8.1 3.1-10.6 2.1-2.5 5-3.7 8.6-3.7 3.6 0 6.4 1.2 8.4 3.6 2 2.4 3.1 5.9 3.1 10.5s-1 8.2-2.9 10.6M229.3 41.7c-3.2-1.3-5.2-2.3-6.1-3.2-.8-.8-1.2-1.9-1.2-3.3 0-1.2.5-2.3 1.6-3.1 1.1-.8 2.5-1.2 4.4-1.2 1.7 0 3.5.3 5.2.8 1.7.5 3.3 1.2 4.5 2.1l.4.3v-9.4l-.2-.1c-1.2-.5-2.7-.9-4.6-1.3-1.9-.3-3.6-.5-5-.5-4.8 0-8.8 1.2-11.9 3.7-3.1 2.4-4.6 5.7-4.6 9.5 0 2 .3 3.8 1 5.3s1.7 2.9 3.1 4c1.4 1.1 3.4 2.3 6.2 3.5 2.3 1 4.1 1.8 5.2 2.4 1.1.6 1.8 1.3 2.3 1.9.4.6.6 1.4.6 2.4 0 2.9-2.2 4.3-6.6 4.3-1.7 0-3.5-.3-5.6-1-2.1-.7-4-1.7-5.7-2.9l-.4-.3v9.9l.2.1c1.5.7 3.3 1.2 5.4 1.7 2.2.4 4.1.7 5.8.7 5.2 0 9.5-1.2 12.5-3.7 3.1-2.5 4.7-5.7 4.7-9.8 0-2.9-.8-5.4-2.5-7.4-1.8-2-4.7-3.8-8.7-5.4M267.6 22.9c-7.1 0-12.7 2.1-16.7 6.2s-6 9.8-6 16.9c0 6.7 2 12.1 5.9 16.1 3.9 3.9 9.2 5.9 15.8 5.9 6.9 0 12.4-2.1 16.4-6.3 4-4.2 6-9.8 6-16.7 0-6.8-1.9-12.3-5.7-16.2-3.8-3.9-9.1-5.9-15.7-5.9m8 33.1c-1.9 2.4-4.8 3.6-8.5 3.6s-6.6-1.2-8.7-3.7c-2.1-2.4-3.1-5.9-3.1-10.3 0-4.6 1.1-8.1 3.1-10.6 2.1-2.5 5-3.7 8.6-3.7 3.5 0 6.4 1.2 8.4 3.6 2 2.4 3.1 5.9 3.1 10.5s-1 8.2-2.9 10.6"/><path d="M342.9 32.2v-8.2h-10.2v-12.9l-.3.1-9.6 2.9-.2.1v9.7h-15.2v-5.4c0-2.5.6-4.4 1.7-5.7 1.1-1.3 2.7-1.9 4.7-1.9 1.4 0 2.9.3 4.5 1l.4.2v-8.7l-.2-.1c-1.4-.5-3.3-.8-5.7-.8-3 0-5.7.7-8.1 1.9-2.4 1.3-4.2 3.1-5.5 5.5-1.3 2.3-2 5-2 8v6h-7.2v8.2h7.1v34.8h10.2v-34.7h15.2v22.1c0 9.1 4.3 13.7 12.8 13.7 1.4 0 2.9-.2 4.3-.5 1.5-.3 2.6-.7 3.2-1l.1-.1v-8.3l-.4.3c-.6.4-1.2.7-2.1.9-.8.2-1.5.3-2 .3-2 0-3.4-.5-4.4-1.6-.9-1.1-1.4-2.9-1.4-5.5v-20.3h10.3z"/></g></svg>
				</a>
			</div>
			<div id="copyright">
				© 2018 Microsoft
			</div>
		</div>
	</div><!-- .site-info -->
</footer><!-- .site-footer -->

</div><!-- .site -->

	<script type="text/javascript">
	jQuery(document).ready(function($){
		$login_link = $( 'a[href*="wp-login.php?"]' );
				$login_link.on( 'click', function( evt ) {
			// evt.preventDefault();
						// console.log( 'cookie-set', '/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/' );
			$.cookie( 'aadsso-redirect', '/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/', { expires: 1, path: '/' });
		});
	});
	</script>
		<script>
		jQuery(window).load(function () {
			// Fix Bug #644092:MAS36: Page number
			jQuery('div.nav-links>a.page-numbers').each(function(){
				jQuery(this).attr('aria-label', 'Page ' + jQuery(this).html());
			});

			// Fix Bug #633981:MAS20B:  Talkback: Talkback announces link for Number of Comments as 'Number link'
			jQuery('span.comments-link>a').each(function () {
				var num = parseInt(jQuery(this).html());
				if (isNaN(num)) {
					return false;
				}
				var content = num + (num === 1 ? ' comment' : ' comments');
				jQuery(this).attr({
					'aria-label': content,
					'title': content
				});
			});


			jQuery('#search-option>div').each(function () {
				jQuery(this).attr('aria-label',jQuery('span.search-text',this).html());
			});

			// Fix Bug #671896:MAS40B :Inspect: Header: "Name" property is not descriptive for  "Microsoft | TechNet" link (logo).
			var currentHost = location.hostname;
			if (currentHost.indexOf('msdn') !== -1) {
				jQuery('#home-link').attr('aria-label','Microsoft Developer');
			} else if (currentHost.indexOf('technet') !== -1) {
				jQuery('#home-link').attr('aria-label','Microsoft Technet');
			}

			// Detect High Contrast Mode in non IE/Edge Browsers
			jQuery('html').css('background-image', 'url("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")');
			if (jQuery('html').css('background-image') === 'none') {
				jQuery('html').attr('data-high-contrast', 'true');
			}

			// Fix Bug #670327:MAS40B: Inspect: Header: "Localized control type" property is incorrect for the header elements.
			// Fix Bug #683788:MAS40B: TalkBack: Header: For menu items in technet link menu bar, expand/collapse pattern available, is not announced by TalkBack 
			jQuery('#site-navigation>div>ul>li>a').attr('role', 'button').attr('aria-expanded', 'false').click(function () {
				if (jQuery(this).attr('aria-expanded') === 'true') {
					jQuery(this).attr('aria-expanded', 'false');
				} else {
					jQuery(this).attr('aria-expanded', 'true');
				}
			});

		});
	</script>
		<!--ADD WEDCS SCRIPT-->
	<div id="_WEDCSInsertedData" style="display: none;"></div>
	<script type="text/javascript">
		jQuery( window ).load(
			function() {
				window.varSegmentation = 0;
				window.varClickTracking = 1;
				window.varCustomerTracking = 1;
				window.varAutoFirePV = 1;
				window.Route = ""; // was 23470 in the windows theme framework
				window.Ctrl = "";

								var blogPost = {};

								blogPost.permalink = 'https://blogs.technet.microsoft.com/rrasblog/2006/06/14/which-ports-to-unblock-for-vpn-traffic-to-pass-through/';
				blogPost.title = 'Which ports to unblock for VPN traffic to pass-through?';
				blogPost.author = 'rrasblog';
				blogPost.post_date = '2006-06-14 05:59:00';
				blogPost.category = 'Uncategorized';
				blogPost.tag = 'Design,Troubleshooting';
				blogPost.comment_number = '8';
								window.blogPost = blogPost;

				var wedcs_script = document.createElement('script');
				wedcs_script.type = 'text/javascript';
				wedcs_script.async = true;
				wedcs_script.src = 'https://blogs.technet.microsoft.com/rrasblog/wp-content/mu-plugins/wedcs-script/ms2_blogs.js';
				if (typeof mscc === 'undefined' || (!mscc || mscc.hasConsent())) {
					document.getElementsByTagName('body')[0].appendChild(wedcs_script);
				}

				var script_jsll = document.createElement("script");
				script_jsll.type = "text/javascript";
				script_jsll.src = "//az725175.vo.msecnd.net/scripts/jsll-4.2.1.js";
				script_jsll.onload = function () {
					var domainAppIdDic = {
						"blogs.msdn.microsoft.com": "blogsmsdn",
						"blogs.technet.microsoft.com": "blogstechnet"
					};
					var domain = document.domain;
					var appId = "blogsmsdn";
					if (domainAppIdDic[domain]) {
						appId = domainAppIdDic[domain];
					}
					var config = {
						coreData: {
							appId: appId
						}
					};
					awa.init(config);
				};
				if (document.getElementsByTagName("head") && document.getElementsByTagName("head").length > 0) {
					document.getElementsByTagName("head")[0].appendChild(script_jsll);
				}
			});
	</script>
	<!--
	<script src="//c.microsoft.com/ms.js" type="text/javascript"></script>
	<noscript><img alt="" width="1" height="1" src="http://c.microsoft.com/trans_pixel.aspx"/></noscript>
	-->
		<script type="text/javascript">
			jQuery( window ).load(
				function () {
					var stylesheet = document.createElement('link');
					stylesheet.href = 'https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/style.css?ver=3.3.3';
					stylesheet.rel = 'stylesheet';
					stylesheet.type = 'text/css';
					document.getElementsByTagName('head')[0].appendChild(stylesheet);
				});
		</script>
				<script type="text/javascript">
			jQuery( window ).load(
				function () {
					var stylesheet = document.createElement('link');
					stylesheet.href = 'https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/icons.css?ver=3.3.3';
					stylesheet.rel = 'stylesheet';
					stylesheet.type = 'text/css';
					document.getElementsByTagName('head')[0].appendChild(stylesheet);
				});
		</script>
				<script type="text/javascript">
			jQuery( window ).load(
				function () {
					var script = document.createElement('script');
					script.src = 'https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/js/front-widget.js?ver=3.3.3';
					script.type = 'text/javascript';
					script.async = true;
					document.getElementsByTagName('body')[0].appendChild(script);
				});
		</script>
		
		<span id='page-view-tracking-info' blog-id='341' post-id='14'></span>
		<script type="text/javascript">
			// Check for compatibility before IE8
			if (!Date.now) {
 				 Date.now = function() { return new Date().getTime(); };
			}
			jQuery( window ).load( function() {
				jQuery.ajax({
					url: 'https://blogs.technet.microsoft.com/rrasblog/wp-admin/admin-ajax.php',
					type: 'get',
					data: {
						action: 'track_page_view',
						track_page_view_post_id: jQuery('#page-view-tracking-info').attr('post-id'),
						track_page_view_blog_id: jQuery('#page-view-tracking-info').attr('blog-id'),
						track_page_view_post_url: window.location.href.split('?')[0],
						timestamp: Date.now()
						}
				});
			});
		</script>
<script>
dataLayer = [[]];
</script>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PLR87W" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>jQuery(window).load(function(){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PLR87W')});</script>
<!-- End Google Tag Manager --><script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/akismet/_inc/form.js?ver=3.1.11'></script>
<link rel='stylesheet' id='eucookielaw-css-css'  href='https://uhf.microsoft.com/mscc/statics/mscc-0.4.0.min.css?ver=4.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='msdn-comment-notification-comment-form-css'  href='https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/msdn-comment-notification/msdn-comment-notification-comment-form.css?ver=20161219' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var wds_ratings_config = {"ajaxurl":"https:\/\/blogs.technet.microsoft.com\/rrasblog\/wp-admin\/admin-ajax.php","user_id":"0","nonce":"d9c7244d03","debug":"","no_auth_alert":"You must be logged in to rate this article.","repeatedly_vote_alert":"You can not vote repeatedly in a short time","allow_anonymous_rating":"","blog_id":"341","rating_limit_login_user":"1","rating_limit_anonymous":"1","hide_rating_post_ids":""};
var wds_ratings_config = {"ajaxurl":"https:\/\/blogs.technet.microsoft.com\/rrasblog\/wp-admin\/admin-ajax.php","user_id":"0","nonce":"d9c7244d03","debug":"","no_auth_alert":"You must be logged in to rate this article.","repeatedly_vote_alert":"You can not vote repeatedly in a short time","allow_anonymous_rating":"","blog_id":"341","rating_limit_login_user":"1","rating_limit_anonymous":"1","hide_rating_post_ids":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/wds-ratings/wds-ratings.js?ver=20161014'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/js/theme-merged.js?ver=02092017'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-includes/js/wp-embed.min.js?ver=4.8.3'></script>
<script type='text/javascript' src='https://uhf.microsoft.com/mscc/statics/mscc-0.4.0.min.js?ver=4.8.3'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/eu-cookie-law/eucookielaw-searchbox-script.js?ver=4.8.3'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/plugins/msdn-comment-notification/msdn-comment-notification-comment-form.js?ver=20161219'></script>
<script type='text/javascript' src='https://blogs.technet.microsoft.com/rrasblog/wp-content/themes/microsoft/js/vendor/jquery.cookie.js?ver=11092015'></script>

</body>
</html>
